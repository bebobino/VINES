@page
@model VINES.Pages.ForumPosts.IndexModel

@{
   

}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Forum Post</title>
                <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
        <link href="css/style.css" rel="stylesheet" />
                <script type="text/javascript">
    $(document).ready(function() {

        $('[data-toggle="tooltip"]').tooltip();

        $('table .delete').on('click', function() {
            var id = $(this).parent().find('#id').val();
            $('#deleteForumPostsModal #id').val(id);
        });

        $('table .edit').on('click', function() {
            var id = $(this).parent().find('#id').val();
            $.ajax({
                type: "GET",
                data: {id: id},
                url: '@Url.Page("Index", "Find")',
                success: function (result) {
                    $('#editForumPostsModal #id').val(result.id);
                    $('#editForumPostsModal #title').val(result.title);
                    $('#editForumPostsModal #category').val(result.category);
                    $('#editForumPostsModal #content').val(result.content);
                }
            });
        });

    });
            
        </script>

    </head>
    <body>
       <div class="container">
           <div class="table-wrapper">
               <div class="table-title">
                   <div class="row">
                       <div class="col-sm-6">
                           <h2> Manage <b>Forum Posts</b></h2>
                       </div>
                       <div class="col-sm-6">
                           <a href="#addForumPostsModal" class="btn btn-success" data-toggle="modal">
                               <i class="material.icons">&#xE147;</i>
                               <span>Add New Forum Post</span>
                           </a>
                       </div>
                   </div>
               </div>
               <table class="table table-striped table-hover">
                   <thead>
                       <tr>
                       <th>No.</th>
                       <th>Title</th>
                       <th>Category</th>
                       <th>Content</th>
                       <th>Date Added</th>
                       <th>Date Modified</th>
                       </tr>
                   </thead>
                   <tbody>
                       @{var i = 1;}
                       @foreach (var forumPost in Model.ForumPosts)
                       {
                        <tr>
                            <td>@i</td>
                            
                            <td>@forumPost.forumCategory>
                            <td>@forumPost.forumContent</td>
                            <td>@forumPost.dateAdded</td>
                            <td>@forumPost.lastModified</td>

                            <form method="post" asp-page="Index" asp-page-handler="Details">
                                
                                <button type="submit"></button>

                            </form>
                            <td>@Html.ActionLink("Title","Details", new {ForumPosts = forumPost.forumPostID})</td>

                            <td>
                                <a href="#editForumPostsModal" class="edit" data-toggle="modal">
                                    <i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i>
                                </a>
                                <a href="#deleteForumPostsModal" class="delete" data-toggle="modal">
                                    <i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872</i>
                                </a>
                                <input type="hidden" name="id" id="id" value="@forumPost.forumPostID" />
                            </td>
                        </tr>
                        i++;
                    }
                   </tbody>
               </table>
           </div>

    </div>
       
       <!-- Add Modal-->
       <div id="addForumPostsModal" class="modal fade">
           <div class="modal-dialog">
               <div class="modal-content">
                   <form method="post" asp-page="Index" asp-page-handler="Create">
                       <div class="modal-header">
                           <h4 class="modal-title">Add Forum Post</h4>
                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                     
                       </div>
                       <div class="modal-body">
                           <div class="form-group">
                               <label>Title</label>
                               <input type="text" class="form-control" required="required" name="title" />
                           </div>
                           <div class="form-group">
                               <label>Category</label>
                               <select id="category" name="category" required="required">
                                   <option value="1">1</option>
                                   <option value="2">2</option>
                                   <option value="3">3</option>
                               </select>
                           </div>
                           <div class="form-group">
                               <label>Content</label>
                               <textarea class="form-control" required="required" name="content"></textarea>
                           </div>
                       </div>
                       <div class="modal-footer">
                           <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" />
                           <input type="submit" class="btn btn-success" value="Add" />
                       </div>
                   </form>
               </div>
           </div>
       </div>
       <!-- Edit Modal-->
       <div id="editForumPostsModal" class="modal fade">
           <div class="modal-dialog">
               <div class="modal-content">
                   <form method="post" asp-page="Index" asp-page-handler="Update">
                       <div class="modal-header">
                           <h4 class="modal-title">Edit Forum Post</h4>
                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                       </div>
                       <div class="modal-body">
                           <div class="form-group">
                               <label>Title</label>
                               <input type="text" class="form-control" required="required" name="title" id="title" />
                           </div>
                           <div class="form-group">
                               <label>Category</label>
                               <select id="category" name="category" required="required">
                                   <option value="1">1</option>
                                   <option value="2">2</option>
                                   <option value="3">3</option>
                               </select>
                           </div>
                           <div class="form-group">
                               <label>Content</label>
                               <textarea class="form-control" required="required" name="content" id="content"></textarea>
                           </div>
                       </div>
                       <div class="model-footer">
                           <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" />
                           <input type="submit" class="btn btn-info" value="Save" />
                           <input type="hidden" name="id" id="id" />
                       </div>
                   </form>
               </div>
           </div>
       </div>
       <!-- Delete Modal -->
       <div id="deleteForumPostsModal" class="modal fade">
           <div class="modal-dialog">
               <div class="modal-content">
                   <form method="post" asp-page="Index" asp-page-handler="Delete">
                       <div class="modal-header">
                           <h4 class="modal-title">Delete Forum Post</h4>
                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                       </div>
                       <div class="modal-body">
                           <p>Are you sure you want to delete this post?</p>
                           <p class="text-warning"><small>This action cannot be undone.</small></p>
                       </div>
                       <div class="modal-footer">
                           <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" />
                           <input type="submit" class="btn btn-danger" value="Delete" />
                           <input type="hidden" name="id" id="id"/>
                       </div>
                   </form>
               </div>
           </div>
       </div>
    </body>
</html>
