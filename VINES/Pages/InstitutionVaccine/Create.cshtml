@page
@model VINES.Pages.InstitutionVaccine.CreateModel
@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService
@{
}
@if ((await AuthorizationService.AuthorizeAsync(User, "AdminOnly")).Succeeded)
{
<div class="border container" style="padding:30px;">  
    <form method="post">  
        <div class="form-group row">
            <div class="form-group row">  
            <div class="col-4">  
                <label asp-for="institutionVaccines.diseaseID"></label>  
            </div>  
            <div class="col-6">  
                <select asp-for="institutionVaccines.diseaseID" name="dID">
                    @foreach (var diseases in Model.disease)
                    {
                        <option value="@diseases.diseaseID">@diseases.diseaseName</option>
                    }
                </select>  
            </div>  
        </div>
        </div>
        <div class="form-group row">  
            <div class="col-4">  
                <label asp-for="institutionVaccines.institutionID"></label>  
            </div>  
            <div class="col-6">  
                <select asp-for="institutionVaccines.institutionID" name="instiID">
                    @foreach (var institution in Model.institutions)
                    {
                        <option value="@institution.institutionID">@institution.institutionName</option>
                    }
                </select>  
            </div>  
        </div>
        <div class="form-group row">  
            <div class="col-4">  
                <label asp-for="institutionVaccines.vaccineID"></label>  
            </div>  
            <div class="col-6">  
                <select asp-for="institutionVaccines.vaccineID" name="vID">
                    @foreach (var vaccines in Model.vaccines)
                    {
                        <option value="@vaccines.vaccineID">@vaccines.vaccineName</option>
                    }
                </select>  
            </div>  
        </div>
  
        <div class="form-group row">  
            <div class="col-4">  
                <label asp-for="institutionVaccines.price"></label>  
            </div>
            <div class="col-6">  
                <input type="number" asp-for="institutionVaccines.price" class="form-control" name="price"></input>
            </div>  
        </div>  

        <div class="form-group row">  
            <div class="col-4">  
                <label asp-for="institutionVaccines.notes"></label>  
            </div>
            <div class="col-6">  
                <textarea type="number" asp-for="institutionVaccines.notes" class="form-control" name="notes"></textarea>
            </div>  
        </div>  
  
        <div class="form-group row">  
            <div class="col-3 offset-4">  
                <input type="submit" value="Create" class="btn btn-primary form-control" />  
            </div>  
            <div class="col-3">  
                <a asp-page="Index" class="btn btn-success form-control">Back to Index</a>  
            </div>  
        </div>  
    </form>  
</div>   
}
else {
    @if (User.Identity.IsAuthenticated && User.IsInRole("Patient")) {
        
        Response.Redirect("/patientLanding");
    }
        else if (User.Identity.IsAuthenticated && User.IsInRole("Advertiser")) {
        
        Response.Redirect("/advertiserLanding");
    }
        else{
        Response.Redirect("/Index");
    }
}